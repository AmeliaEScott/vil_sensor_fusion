<launch>

    <arg name="rovio" default="true" />
    <arg name="loam" default="true" />
    <arg name="rviz" default="false" />
    <arg name="do_fusion" default="true" />

    <group if="$(arg rovio)" >
        <node pkg="image_proc" type="image_proc" name="image_proc" ns="/cam0">

        </node>

        <node pkg="image_proc" type="image_proc" name="image_proc" ns="/cam1">

        </node>

        <remap from="cam0/image_raw" to="cam0/image_mono" />
        <remap from="cam1/image_raw" to="cam1/image_mono" />
        <remap from="imu0" to="imu0/ros" />
        <node pkg="rovio" type="rovio_node" name="rovio" output="screen">
            <param name="filter_config" value="$(find vil_fusion)/cfg/rovio.info"/>
            <param name="camera0_config" value="$(find vil_fusion)/cfg/carla.yaml"/>
            <param name="camera1_config" value="$(find vil_fusion)/cfg/carla.yaml"/>
        </node>
    </group>

    <!--
    Subscriptions:
 * /imu/data [unknown type]
 * /velodyne_points [unknown type]

    -->


    <include if="$(arg loam)" file="$(find loam_velodyne)/launch/loam_velodyne.launch" ns="loam">
        <remap from="/imu/data" to="imu0/ros" />
        <arg name="rviz" value="$(arg rviz)" />
    </include>

    <group if="$(arg do_fusion)">
        <node pkg="vil_fusion" type="vil_fusion_node" name="vil_fusion_node" output="screen">
            <remap from="~imu" to="imu0/ros" />
            <remap from="~loam_odometry" to="/laser_odom_to_init" />
            <remap from="~rovio_odometry" to="/rovio/odometry" />
        </node>
    </group>

</launch>